<!doctype html> 
   <head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>Bing maps geocoding example - jQuery Bing maps</title>
		<meta name="description" content="A jQuery Bing maps geocoding example using jQuery Bing maps v7 plugin for web and mobile" />
		<meta name="author" content="Johan Säll Larsson" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
		<meta name="DC.title" content="Bing maps geocoding example - jQuery Bing maps" />
		<meta name="DC.description" content="A jQuery Bing maps geocoding maps  example using jQuery Bing maps v7 plugin for web and mobile" />
		<meta name="DC.creator" content="Johan Säll Larsson" />
        <meta name="DC.language" content="en" />
		<link type="text/css" rel="stylesheet" href="css/960/960.css" />
		<link type="text/css" rel="stylesheet" href="css/960/960_16_col.css" />
		<link type="text/css" rel="stylesheet" href="css/normalize/normalize.css" />
		<link type="text/css" rel="stylesheet" href="css/prettify/prettify.css" />
		<link type="text/css" rel="stylesheet" href="css/demo.css" />
		<link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Anton" />
		<script type="text/javascript" src="js/modernizr-2.0.6/modernizr.min.js"></script>
    </head>
    <body>
		<header class="dark">
			<div class="container_16">
				<h1><a href="/">jQuery Bing maps <span id="version"></span></a> geocoding example</h1>
			</div>
		</header>
		<div class="container_16">
			<article class="grid_16">
				<div class="search item rounded">
					<label for="search_query">Search</label><input id="search_query" class="big-input-search rounded" placeholder="Enter an address or a city, eg. New York, USA" type="text" />
				</div>
				<div class="item rounded dark">
					<div id="map_canvas" class="map rounded lft"></div>
					<div id="search_result" class="lft"></div>
					<div class="clear"></div>
				</div>
				<div class="content rounded light shadow">
					<h2>Using jQuery with Bing maps</h2>
					<p>
						Download <a href="http://jquery.com/">jQuery 1.4.X or higher</a> or
						use <a href="http://code.google.com/intl/sv-SE/apis/libraries/devguide.html">Googles</a> or <a href="http://www.asp.net/ajaxlibrary/cdn.ashx">Microsofts</a> 
						<abbr title="Content delivery network"><a href="http://en.wikipedia.org/wiki/Content_delivery_network">CDN</a></abbr>.
					</p>
<pre class="prettyprint rounded">
&lt;script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="PATH_TO_PLUGIN/jquery.fn.map.js"&gt;&lt;/script&gt;</pre>
					
<pre class="prettyprint rounded">
$('#map_canvas').gmap({'credentials': YOUR_BING_MAP_CREDENTIALS }).bind('init', function() {
	$('#map_canvas').gmap('search', { 'query': 'New York, USA' }, function(result, status) {
		if ( status === 'OK' ) {
			var location = new Microsoft.Maps.Location(item.point.coordinates[0],item.point.coordinates[1]);
			$('#map_canvas').gmap('addMarker', { 'location': location, 'bounds': true });
		}
	});
});</pre>

<pre class="prettyprint rounded">
$('#map_canvas').gmap({'credentials': YOUR_BING_MAP_CREDENTIALS, 'callback': function(map) {
	var self = this;
	self.search( { 'query': 'New York, USA' }, function(result, status) {
		if ( status === 'OK' ) {
			var location = new Microsoft.Maps.Location(item.point.coordinates[0],item.point.coordinates[1]);
			self.addMarker( { 'location': location, 'bounds': true });
		}
	});
}});</pre>

				</div>
			</article>
		</div>
		<footer class="dark">
			<div class="container_16">
				<div class="grid_8 more">
					<h2>More Bing maps and jQuery examples</h2>
					<ul>
						<li><a href="jquery-bing-maps-hello-world-example.html">Bing maps with jQuery mobile "Hello world" example</a></li>
						<li><a href="jquery-bing-maps-filter-by-property.html">Filter pushpins by property</a></li>
						<li><a href="jquery-bing-maps-load-marker-by-json.html">Load Bing map with JSON data</a></li>
						<li><a href="jquery-bing-maps-multiple-maps.html">Show multiple Bing maps without specifying an id</a></li>
						<li class="sel buttonize"><a href="jquery-bing-maps-geocoding-search.html">Address and longitude/latitude (Geocoding) lookup with Bing maps</a></li>
					</ul>
				</div>
				<div id="forum" class="hidden rounded forum grid_8"></div>
				<div class="grid_16" itemscope itemtype="http://data-vocabulary.org/Person">
					Author: <span itemprop="name">Johan S&auml;ll Larsson</span> (<a href="http://johansalllarsson.se" itemprop="url">http://johansalllarsson.se</a>)
				</div>
			</div>
		</footer>
		<script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
		<script type="text/javascript" src="js/jquery-1.7.1/jquery.min.js"></script>
        <script type="text/javascript" src="js/underscore-1.2.2/underscore-min.js"></script>
		<script type="text/javascript" src="js/backbone-0.5.3/backbone-min.js"></script>
		<script type="text/javascript" src="js/prettify/prettify.min.js"></script>
		<script type="text/javascript" src="js/demo.js"></script>
		<script type="text/javascript" src="../js/jquery.ui.bmap.js"></script>
		<script type="text/javascript" src="../js/jquery.ui.bmap.services.js"></script>
        <script type="text/javascript">    
			$(function() { 
				demo.add(function() {
					$('#map_canvas').gmap(jQuery.extend({'callback': function() {
						var self = this;
						$('#search_query').keypress( function(event) {
							if ( $(this).val() != '' && event.which == 13 ) {
								var width = parseInt(self.get('width', self.el.css('width')));
								self.clear('markers');
								self.search({ 'query': $(this).val() }, function(result, status) { 
									if ( status === 'OK' ) {
										self.el.animate({ 'width': width-300 }, { 'duration': 250 });
										$('#search_result').animate({ 'width': 300 }, { 'duration': 250 });
										$('#search_result').html('');
										$.each(result[0].resources, function(i, item) {
											self.addMarker({ 'id': 'm_'+i, 'location': new Microsoft.Maps.Location(item.point.coordinates[0],item.point.coordinates[1]), 'bounds': true }).click(function() {
												self.openInfoWindow({ 'title': item.address.formattedAddress }, this);
											});
											$('#search_result').append('<div id="m_{0}" class="{1}"><p><strong>{2}</strong> ({3})</p></div>'.format(i,((i%2)?'odd':'even'),item.address.formattedAddress,item.address.countryRegion));
											$('#m_'+i).hover(function() {
												self.get('map').setView({'center': self.get('markers')[$(this).attr('id')].getLocation()});
											});
											
										});
									} else {
										self.el.animate({ 'width': '100%' }, { 'duration': 250 });
										$('#search_result').animate({ 'width': 0 }, { 'duration': 250 });
									}
								});
							}
						});
					}}, demo.mapOptions));
				}).load();
			});
        </script>
    
	</body>
</html>